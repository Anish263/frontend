<div class="main-container h-100 d-flex align-items-center justify-content-center">
    <app-notify [msg]="resetMsg"></app-notify>
    <div class="box-container" #boxContainer>
        <h2 class="text-white mb-5">LOGIN</h2>
        <form [formGroup]="loginForm">
            <div class="alert alert-info small msg" *ngIf="loginStaus != null">{{loginStaus}}</div>
            <div class="mb-3 row">
                <label for="userName" class="col-sm-4 col-form-label">Email</label>
                <div class="col-sm-8">
                    <input type="text" class="form-control" id="userName" placeholder="email@example.com" formControlName="userName" required autocomplete="username">
                    <div class="text-danger" *ngIf="!loginForm.get('userName').valid && loginForm.get('userName').touched">Please enter username</div>
                </div>
            </div>
            <div class="mb-3 row">
                <label for="inputPassword" class="col-sm-4 col-form-label">Password</label>
                <div class="col-sm-8">
                    <input type="password" class="form-control" id="inputPassword" formControlName='password' required autocomplete="current-password">
                    <div class="text-danger" *ngIf="!loginForm.get('password').valid && loginForm.get('password').touched">Please enter password</div>
                </div>
            </div>
            <div class="mb-3 row">
                <span><button class="btn text-white" type="button" value="submit" (click)="loginSubmit(loginForm)"
                  [disabled]="validityFlag">
                  <div class="spinner-border" role="status" *ngIf="loading">
                    <span class="visually-hidden">Loading...</span>
            </div>
            <b *ngIf="!loading">LOGIN</b>
            </button>
            </span>
    </div>
    <span class="fp"><a href="" data-toggle="modal" data-target="#forgotModal">Forgot password ?</a></span>
    <div class="fp"><a routerLink="/signup">Click here to register</a></div>
    </form>
</div>
</div>

<div id="forgotModal" class="modal fade">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">RESET PASSWORD</h4>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
                <form [formGroup]="forgotForm">
                    <div class="row mb-3">
                        <span class="fname">User Name</span>
                        <span><input type="text" formControlName="userName" width="30px" class="fuser form-control" autocomplete="username"></span>
                        <div class="errmsg">
                            <span [style.visibility]="'hidden'" class="text-danger"></span>
                            <span class="text-danger" *ngIf="!forgotForm.get('userName').valid && forgotForm.get('userName').touched">Enter
                                username</span>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <span class="fname">Password</span>
                        <span><input type="password" formControlName="password" width="30px" class="fpass form-control" autocomplete="new-password"></span>
                        <div class="errmsg">
                            <span [style.visibility]="'hidden'" class="text-danger"></span>
                            <span class="text-danger" *ngIf="!forgotForm.get('password').valid && forgotForm.get('password').touched">Enter
                                Password</span>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <span class="fname">Re-enter Password</span>
                        <span><input type="password" formControlName="confirmPassword" width="50px" class="fcpass form-control" autocomplete="new-password"></span>
                        <div class="errmsg">
                            <span [style.visibility]="'hidden'" class="text-danger"></span>
                            <span class="text-danger" *ngIf="!forgotForm.get('confirmPassword').valid && forgotForm.get('confirmPassword').touched">Re-Enter
                                Password</span>
                            <span class="text-danger" *ngIf="forgotForm.get('password').value!=forgotForm.get('confirmPassword').value && forgotForm.get('password').touched && forgotForm.get('confirmPassword').dirty">
                                Password  does not match</span>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="fpbtn text-white btn btn-primary" value="submit" data-dismiss="modal" (click)="resetPassword(forgotForm)" [disabled]="!forgotForm.valid && forgotForm.get('password').value!=forgotForm.get('confirmPassword').value">RESET</button>
            </div>
        </div>
    </div>
</div>
